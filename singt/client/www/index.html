<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Singt - Singer</title>
    
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/singt.css" rel="stylesheet">
    <script src="./js/jquery-3.5.1.js" defer></script>
    <script src="./js/bootstrap.min.js" defer></script>
    <script src="./js/singer.js" defer></script>

    <!--<link href="navbar.css" rel="stylesheet">-->
  </head>
  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-xl">
        <span class="navbar-brand">Singt</span>

        <!-- the menu button that gets revealed if composer window is small-->
        <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbar_composer" aria-controls="navbar_composer"
                aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbar_composer">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="#page_setup">Setup</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#page_connect">
                Connect
                <span class="d-none badge badge-pill badge-danger pulse">&nbsp;</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#page_debug">Debug</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-xl mt-5 mb-3">
      <!-- Tracks -->
      <div id="page_setup" class="page">
        <div class="card">
          <div class="card-header">
            <h2>
              <img src="./icons/gear.svg" alt="" width="32" height="32" class="mr-2">
              Setup
            </h2>
          </div>
          <div class="card-body">
            <p class="mb-3">
              To use Singt, you'll need to have
              your <strong>headphones plugged in</strong> as it's very
              important that the computer can't hear itself.  If you
              don't wear headphones everyone else will hear horrible
              feedback and they might stop being your friend.
            </p>

            <p class="mb-3">It's also important that your headphones
              are <strong>wired</strong>; Bluetooth connections add
              considerable latency, which we're trying to avoid.
            </p>
            <p class="mb-3">
              Before we can connect and sing together we need to know
              a couple of technical things about your computer and how
              it records your voice.
            </p>
          </div> <!-- /card-body -->

          <div class="card-body">
            <h3>Loop-Back Latency for Recordings</h3>
            <p class="mb-3">
              The first thing we need to know is how much time passes
              between Singt asking for your computer to play a sound
              and your computer recording that same sound.  We'll
              call this <em>loop-back latency</em>.

            <p class="mb-3">
              We need to know this value in order to synchronise your
              voice with the backing tracks that you'll sing to.
            </p>

	         <button class="btn btn-primary mr-2"
                    id="button_measure_loop_back_latency_recording">
              Measure Loop-Back Latency for Recording
            </button>
          </div> <!-- /card-body -->

            
          <div class="card-body">
            <h3>Gain for Recordings</h3>
            
            <p class="mb-3">
              The second thing we need to know is how loudly the
              computer hears you sing.  This depends on both how
              loudly you sing and also where you are relative to your
              microphone.  During this test make sure you're sitting
              or standing as you will during recordings and then sing
              as loudly as you do normally.
            </p>

            <p class="mb-3">
              We will calculate the <em>gain</em> required such that
              your voice (at least initially) will be the same volume
              as the other singers.
            </p>

	         <button class="btn btn-primary mr-2"
                    id="button_measure_gain_recording">
              Measure Gain for Recording
            </button>
          </div> <!-- /card-body -->
          
        </div> <!-- /card -->
      </div>

      <!-- Connect -->
      <div id="page_connect" class="page">
        <div class="d-none card" id="card_connect">
          <div class="card-header">
            <h2>
              <img src="./icons/people.svg" alt="" width="32" height="32" class="mr-2">
              Connect
            </h2>
          </div>
          <div class="card-body">
            <p class="mb-3">
              Enter your name (as you wish to be known by the others
              on the server) and the server's IP address (given to you
              by the conductor) and press the "Connect to Server" button.
            </p>
            <div class="row">
              <div class="col">
                <h3>Details</h3>

                <form id="form_recording">
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                      Name
                    </label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="name_input" placeholder="Luciano">
                    </div>
                  </div>
                  
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                      IP Address
                    </label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="address_input" placeholder="127.0.0.1">
                    </div>
                  </div>

                  <button class="btn btn-primary"
                          id="connect-button">
                    Connect to Server
                  </button>

              </div>
            </div>
          </div>
        </div>  <!-- /card -->

        <div class="d-none card" id="card_connected">
          <div class="card-header">
            <h2>
              <img src="./icons/people-fill.svg" alt="" width="32" height="32" class="mr-2">
              Connected
            </h2>
          </div>
          <div class="card-body">
            <p class="mb-3">
              You're connected.
            </p>
            <button class="btn btn-primary"
                    id="button_disconnect">
              Disconnect from Server
            </button>
          </div> <!-- /card-body -->
          
        </div> <!-- /card -->
      </div> <!-- /page -->

      <!-- Debug -->
      <div id="page_debug" class="page">
        <div class="card">
          <div class="card-header">
            <h2>
              <img src="./icons/bug.svg" alt="" width="32" height="32" class="mr-2">
              Debug
            </h2>
          </div>
          <div class="card-body">
            <p class="mb-3">
              The following can be ignored unless there's trouble.  In
              trouble's case, Matthew might ask you to click on one of
              these buttons.
            </p>
          </div>
          
          <div class="card-body">
	         <button class="btn btn-primary mr-2"
                    id="button_check_playback">
              Check Playback
            </button>
          </div> <!-- /card-body -->
          
          <div class="card-body">
	         <button class="btn btn-primary mr-2"
                    id="button_recording">
              Check Recording
            </button>
          </div> <!-- /card-body -->
          
          <div class="card-body">
	         <button class="btn btn-primary mr-2"
                    id="button_recording">
              Measure Loop-Back Levels
            </button>
          </div> <!-- /card-body -->
          
          <div class="card-body">
	         <button class="btn btn-primary mr-2"
                    id="button_measure_loop_back_latency_recording">
              Measure Loop Back Latency for Voice
            </button>
          </div> <!-- /card-body -->
          
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
